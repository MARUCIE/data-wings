# Data Wings - 平台优化计划

**版本**: v0.1
**日期**: 2026-01-28
**作者**: PM/Tech Lead

---

## 1. 优化目标

- 提升关键路径成功率与稳定性
- 降低接入与分析的操作成本
- 强化异常路径可恢复性

## 2. 优化范围

- Web App 关键路径
- API/AI 服务稳定性
- 事件采集与查询延迟

## 3. 关键指标

| 指标 | 基线 | 目标 | 备注 |
|------|------|------|------|
| 关键路径成功率 | 待测 | ≥ 95% | Real-Flow SOP 驱动 |
| 查询成功率 | 待测 | ≥ 95% | Ask / Query |
| 端到端延迟 | 待测 | < 5 min | 事件可查询 |

## 4. 待办与优先级

| 优先级 | 项目 | 说明 | 状态 |
|--------|------|------|------|
| P0 | 真实流程测试闭环 | Persona 覆盖 + 证据 | 进行中 |
| P0 | 审计工具链补齐 | supply audit 证据 | 进行中 |
| P0 | 登录/权限闭环 | /login + RBAC + /app 路由 | 进行中 |
| P1 | 权限异常路径优化 | 403/重定向/提示 | 待开始 |
| P1 | SDK 接入引导优化 | 降低接入摩擦 | 待开始 |
| P1 | UI/UX 优化 | 间距/层级/单一主按钮 | 已完成 |
| P1 | 前端性能与视觉回归 | network/console/perf/visual | 进行中 |

## 5. 已发现问题（Real-Flow 测试）

| 日期 | 问题 | 影响 | 状态 |
|------|------|------|------|
| 2026-01-28 | AI NL2SQL 请求 403（Gemini API Key） | Ask 流程不可用 | 已修复（切换 Poe Provider） |
| 2026-01-28 | ClickHouse 查询扫描错误（String → interface） | Ask/Query 结果返回失败 | 已修复（类型化扫描） |
| 2026-01-28 | 前端端口 3100 CORS 被拒绝 | Dashboard 数据加载失败 | 已修复（CORS_ORIGINS 增补） |

## 6. 风险与缓解

| 风险 | 影响 | 缓解 |
|------|------|------|
| 测试环境不稳定 | 证据不可重复 | 固定版本与数据集 |
| 依赖外部 API | 流程中断 | 预留备用 Key |
